<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/register.css">
    <title>Document</title>
</head>
<body>
    <h2>Formulario de registro</h2>
     <div class="container-form">
     <form method="POST" action="/user/register" class="formulario-register" enctype="multipart/form-data">
        <div class="form-group">
            <label><b>Nombre completo:</b></label>
            <% if (locals.errors && errors.fullName) { %>
                
                <input 
                type="text" 
                name="fullName" 
                class="form-control exclamation <%= locals.errors && errors.fullName ? 'is-invalid' : null %>"
                value="<%= locals.oldData ? oldData.fullName : null %>"
                >
            <% } else { %>
                <input 
                type="text" 
                name="fullName" 
                class="form-control<%= locals.errors && errors.fullName ? 'is-invalid' : null %>"
                value="<%= locals.oldData ? oldData.fullName : null %>"
                >
            <% } %> 
            <% if (locals.errors && errors.fullName) { %>
                <div class="text-danger">
                    <%= errors.fullName.msg %>
                </div>
            <% } %>
        </div>
        <div class="form-group">
            <label><b>Subí una imagen de perfil:</b></label>
            <input type="file" name="avatar" class="form-control " value="<%= locals.oldData ? oldData.avatar : null %>">
            <% if (locals.errors && errors.avatar) { %>
                <div class="text-danger">
                    <%= errors.avatar.msg %>
                </div>
            <% } %>
        </div>
        <div class="form-group">
            <label><b>Usuario:</b></label>
            <% if (locals.errors && errors.user) { %>
                <input type="text" name="user" class="form-control exclamation <%= locals.errors && errors.user ? 'is-invalid' : null %>" value="<%= locals.oldData ? oldData.user : null %>">
            <% } else { %>
                <input type="text" name="user" class="form-control <%= locals.errors && errors.user ? 'is-invalid' : null %>" value="<%= locals.oldData ? oldData.user : null %>">
                
            <% } %> 
            <% if (locals.errors && errors.user) { %>
                <div class="text-danger">
                    <%= errors.user.msg %>
                </div>
            <% } %>
        </div>
        <div class="form-group">
            <label><b>Contraseña:</b></label>
            <% if (locals.errors && errors.password) { %>
                <input type="password" name="password" class="form-control exclamation <%= locals.errors && errors.password ? 'is-invalid' : null %>" value="<%= locals.oldData ? oldData.password : null %>">
            <% } else { %>
                <input type="password" name="password" class="form-control<%= locals.errors && errors.password ? 'is-invalid' : null %>" value="<%= locals.oldData ? oldData.password : null %>">
            <% } %> 
            <% if (locals.errors && errors.password) { %>
                <div class="text-danger">
                    <%= errors.password.msg %>
                </div>
            <% } %>
        </div>
        <div class="form-group">
            <label><b>Contacto:</b></label>
            <% if (locals.errors && errors.email) { %>
                <input type="email" name="email" class="form-control exclamation <%= locals.errors && errors.email ? 'is-invalid' : null %>" value="<%= locals.oldData ? oldData.email : null %>">
                
            <% } else { %>
                <input type="email" name="email" class="form-control<%= locals.errors && errors.email ? 'is-invalid' : null %>" value="<%= locals.oldData ? oldData.email : null %>">
                
            <% } %> 
            <% if (locals.errors && errors.email) { %>
                <div class="text-danger">
                    <%= errors.email.msg %>
                </div>
            <% } %>
        </div>
        <div class="form-group">
            <label><b>Ciudad:</b></label>
            <select name="ciudad" class="form-control ">
                <option value="">Elegí una ciudad</option>
                <%
                    let ciudades = ['Buenos Aires', 'Caracas', 'Venado Tuerto'];
                %>
                <% for (const oneCity of ciudades) { %>
                    <option value="<%= oneCity%>"
                    <%= locals.oldData && (oneCity === oldData.ciudad) ? 'selected' : null %> >
                    <%= oneCity%></option>
                <% }%>
            </select>    
            <% if (locals.errors && errors.ciudad) { %>
                <div class="text-danger">
                    <%= errors.ciudad.msg %>
                </div>
            <% } %>
        </div>
        <button type="submit" class="button">Register</button>
     </form>
     </div>
</body>
</html>